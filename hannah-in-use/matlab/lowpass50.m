function y = lowpass50(x)
%LOWPASS50 Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.0 and the DSP System Toolbox 9.2.
% Generated on: 07-Nov-2016 20:03:09

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % FIR Window Lowpass filter designed using the FIR1 function.
    %
    % % All frequency values are in Hz.
    % Fs = 5000;  % Sampling Frequency
    %
    % N    = 200;      % Order
    % Fc   = 50;       % Cutoff Frequency
    % flag = 'scale';  % Sampling Flag
    %
    % % Create the window vector for the design algorithm.
    % win = blackman(N+1);
    %
    % % Calculate the coefficients using the FIR1 function.
    % b  = fir1(N, Fc/(Fs/2), 'low', win, flag);
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [0 -1.83339603468987e-08 -1.48033856006376e-07 ...
        -5.03997202566392e-07 -1.20451271731102e-06 -2.37069263537704e-06 ...
        -4.12582104342936e-06 -6.59459854654318e-06 -9.90226415681639e-06 ...
        -1.41735764052282e-05 -1.95316373306754e-05 -2.60965451813562e-05 ...
        -3.39838643532665e-05 -4.33029042582822e-05 -5.4154802420431e-05 ...
        -6.66304110948004e-05 -8.08079910319538e-05 -9.67507206069251e-05 ...
        -0.000114504033324264 -0.000134092801621784 -0.000155518389843614 ...
        -0.000178755604152265 -0.000203749571912079 -0.000230412587613935 ...
        -0.000258620966635604 -0.000288211951957389 -0.000318980722296144 ...
        -0.000350677552904308 -0.00038300518243229 -0.00041561644070788 ...
        -0.000448112192989093 -0.000480039656150656 -0.0005108911413331 ...
        -0.000540103275792675 -0.000567056754027447 -0.00059107666472004 ...
        -0.000611433435643389 -0.000627344433448494 -0.000637976249231486 ...
        -0.000642447694012795 -0.000639833520818065 -0.000629168882004202 ...
        -0.000609454521911321 -0.000579662695938978 -0.00053874379784843 ...
        -0.000485633667594838 -0.000419261542413579 -0.000338558604347157 ...
        -0.000242467068030595 -0.000129949743482067 2.70906976701957e-19 ...
        0.000148347950826167 0.000316008542404702 0.000503834206773167 ...
        0.000712604696347086 0.000943016480291122 0.00119567232565993 ...
        0.00147107117593009 0.00176959844078646 0.00209151681098534 ...
        0.00243695771075757 0.00280591349751773 0.00319823051460777 ...
        0.00361360309743911 0.00405156862673672 0.00451150371468011 ...
        0.00499262160064353 0.00549397082304163 0.00601443522258185 ...
        0.00655273532012212 0.00710743109945311 0.00767692621180374 ...
        0.00825947360485152 0.00885318256465788 0.0094560271444031 ...
        0.0100658559392306 0.0106804031520927 0.0112973008813864 ...
        0.0119140925475496 0.0125282473628078 0.0131371757360921 ...
        0.0137382454939214 0.0143287987879158 0.0149061695506943 ...
        0.0154677013543388 0.0160107655194693 0.0165327793183632 ...
        0.0170312241125294 0.0175036632637675 0.017947759658034 ...
        0.0183612926834118 0.0187421745071317 0.0190884655018945 ...
        0.0193983886786416 0.0196703429913594 0.0199029153893914 ...
        0.0200948915039658 0.0202452648681183 0.0203532445827556 ...
        0.0204182613561282 0.0204399718592967 0.0204182613561282 ...
        0.0203532445827556 0.0202452648681183 0.0200948915039658 ...
        0.0199029153893914 0.0196703429913594 0.0193983886786416 ...
        0.0190884655018945 0.0187421745071317 0.0183612926834118 ...
        0.017947759658034 0.0175036632637675 0.0170312241125294 ...
        0.0165327793183632 0.0160107655194693 0.0154677013543388 ...
        0.0149061695506943 0.0143287987879158 0.0137382454939214 ...
        0.0131371757360921 0.0125282473628078 0.0119140925475496 ...
        0.0112973008813864 0.0106804031520927 0.0100658559392306 ...
        0.0094560271444031 0.00885318256465788 0.00825947360485152 ...
        0.00767692621180374 0.00710743109945311 0.00655273532012212 ...
        0.00601443522258185 0.00549397082304163 0.00499262160064353 ...
        0.00451150371468011 0.00405156862673672 0.00361360309743911 ...
        0.00319823051460777 0.00280591349751773 0.00243695771075757 ...
        0.00209151681098534 0.00176959844078646 0.00147107117593009 ...
        0.00119567232565993 0.000943016480291122 0.000712604696347086 ...
        0.000503834206773167 0.000316008542404702 0.000148347950826167 ...
        2.70906976701957e-19 -0.000129949743482067 -0.000242467068030595 ...
        -0.000338558604347157 -0.000419261542413579 -0.000485633667594838 ...
        -0.00053874379784843 -0.000579662695938978 -0.000609454521911321 ...
        -0.000629168882004202 -0.000639833520818065 -0.000642447694012795 ...
        -0.000637976249231486 -0.000627344433448494 -0.000611433435643389 ...
        -0.00059107666472004 -0.000567056754027447 -0.000540103275792675 ...
        -0.0005108911413331 -0.000480039656150656 -0.000448112192989093 ...
        -0.00041561644070788 -0.00038300518243229 -0.000350677552904308 ...
        -0.000318980722296144 -0.000288211951957389 -0.000258620966635604 ...
        -0.000230412587613935 -0.000203749571912079 -0.000178755604152265 ...
        -0.000155518389843614 -0.000134092801621784 -0.000114504033324264 ...
        -9.67507206069251e-05 -8.08079910319538e-05 -6.66304110948004e-05 ...
        -5.4154802420431e-05 -4.33029042582822e-05 -3.39838643532665e-05 ...
        -2.60965451813562e-05 -1.95316373306754e-05 -1.41735764052282e-05 ...
        -9.90226415681639e-06 -6.59459854654318e-06 -4.12582104342936e-06 ...
        -2.37069263537704e-06 -1.20451271731102e-06 -5.03997202566392e-07 ...
        -1.48033856006376e-07 -1.83339603468987e-08 0]);
end

y = step(Hd,x);
delay = mean(grpdelay(Hd));
y(1:delay) = [];

% [EOF]
